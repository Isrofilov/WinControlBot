<Window x:Class="WinControlBot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:WinControlBot.Localization"
        Title="WinControlBot" Height="600" Width="800"
        MinHeight="500" MinWidth="700"
        WindowStartupLocation="CenterScreen"
        Background="White"
        FontFamily="Segoe UI" FontSize="12">

    <Window.Resources>
        <Style x:Key="SimpleButton" TargetType="Button">
            <Setter Property="Background" Value="LightGray"/>
            <Setter Property="BorderBrush" Value="Gray"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="3"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="DarkGray"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Start button style -->
        <Style x:Key="StartButton" TargetType="Button" BasedOn="{StaticResource SimpleButton}">
            <Setter Property="Background" Value="LightGreen"/>
            <Setter Property="BorderBrush" Value="Green"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Green"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Stop button style -->
        <Style x:Key="StopButton" TargetType="Button" BasedOn="{StaticResource SimpleButton}">
            <Setter Property="Background" Value="LightCoral"/>
            <Setter Property="BorderBrush" Value="Red"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Red"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Simple text box style -->
        <Style x:Key="SimpleTextBox" TargetType="TextBox">
            <Setter Property="BorderBrush" Value="Gray"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="3"/>
        </Style>

        <!-- Modern toggle switch style for autostart -->
        <Style x:Key="ModernToggleSwitch" TargetType="ToggleButton">
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="25"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid>
                            <!-- Background track -->
                            <Border Name="TrackBorder" 
                                   Background="#CCCCCC" 
                                   CornerRadius="12.5" 
                                   Height="25" 
                                   Width="50"/>
                            <!-- Sliding thumb -->
                            <Border Name="ThumbBorder" 
                                   Background="White" 
                                   CornerRadius="10" 
                                   Height="20" 
                                   Width="20" 
                                   HorizontalAlignment="Left" 
                                   Margin="2.5,0,0,0"
                                   RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform x:Name="ThumbTransform" X="0"/>
                                </Border.RenderTransform>
                                <Border.Effect>
                                    <DropShadowEffect Color="Gray" BlurRadius="3" ShadowDepth="1" Opacity="0.3"/>
                                </Border.Effect>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                           Storyboard.TargetProperty="X"
                                                           To="25" Duration="0:0:0.2"/>
                                            <ColorAnimation Storyboard.TargetName="TrackBorder"
                                                          Storyboard.TargetProperty="Background.Color"
                                                          To="#28A745" Duration="0:0:0.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                           Storyboard.TargetProperty="X"
                                                           To="0" Duration="0:0:0.2"/>
                                            <ColorAnimation Storyboard.TargetName="TrackBorder"
                                                          Storyboard.TargetProperty="Background.Color"
                                                          To="#CCCCCC" Duration="0:0:0.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ThumbBorder" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="Gray" BlurRadius="4" ShadowDepth="1" Opacity="0.5"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel Margin="10">
        <!-- Top settings panel -->
        <Border DockPanel.Dock="Top" BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
            <StackPanel>
                <Grid Margin="0,0,0,10">
                    <TextBlock Text="{Binding [Settings_Title], Source={x:Static loc:LocalizationManager.Instance}}" FontWeight="Bold" FontSize="14" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    
                    <!-- Language selector -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <TextBlock Text="{Binding [Language_Label], Source={x:Static loc:LocalizationManager.Instance}}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <ComboBox x:Name="LanguageComboBox" Width="100" SelectionChanged="LanguageComboBox_SelectionChanged"
                                  ToolTip="{Binding [Language_Tooltip], Source={x:Static loc:LocalizationManager.Instance}}">
                            <ComboBoxItem Content="{Binding [Language_English], Source={x:Static loc:LocalizationManager.Instance}}" Tag="en-US"/>
                            <ComboBoxItem Content="{Binding [Language_Russian], Source={x:Static loc:LocalizationManager.Instance}}" Tag="ru-RU"/>
                        </ComboBox>
                    </StackPanel>
                </Grid>
                
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Bot token -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding [Settings_BotToken], Source={x:Static loc:LocalizationManager.Instance}}" VerticalAlignment="Center"/>
                    <TextBox x:Name="TokenTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource SimpleTextBox}"/>
                    <Button x:Name="ShowTokenButton" Grid.Row="0" Grid.Column="2" Content="ðŸ‘" Style="{StaticResource SimpleButton}" Click="ShowTokenButton_Click" 
                            ToolTip="{Binding [Settings_ShowToken], Source={x:Static loc:LocalizationManager.Instance}}"/>

                    <!-- Authorized users -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding [Settings_AuthorizedUsers], Source={x:Static loc:LocalizationManager.Instance}}" VerticalAlignment="Center"/>
                    <TextBox x:Name="UsersTextBox" Grid.Row="1" Grid.Column="1" Style="{StaticResource SimpleTextBox}" 
                             ToolTip="{Binding [Settings_AuthorizedUsers.Tooltip], Source={x:Static loc:LocalizationManager.Instance}}"/>
                    
                    <!-- Save settings button -->
                    <Button x:Name="SaveSettingsButton" Grid.Row="2" Grid.Column="2" 
                            Content="{Binding [Settings_Save], Source={x:Static loc:LocalizationManager.Instance}}" 
                            Style="{StaticResource SimpleButton}" Click="SaveSettingsButton_Click" Margin="3,10,3,3"/>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Bottom control panel -->
        <Border DockPanel.Dock="Bottom" BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0,10,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Control buttons -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button x:Name="StartButton" Content="{Binding [Controls_Start], Source={x:Static loc:LocalizationManager.Instance}}" 
                            Style="{StaticResource StartButton}" Click="StartButton_Click"/>
                    <Button x:Name="StopButton" Content="{Binding [Controls_Stop], Source={x:Static loc:LocalizationManager.Instance}}" 
                            Style="{StaticResource StopButton}" Click="StopButton_Click"/>
                    <Button x:Name="RestartButton" Content="{Binding [Controls_Restart], Source={x:Static loc:LocalizationManager.Instance}}" 
                            Style="{StaticResource SimpleButton}" Click="RestartButton_Click"/>
                </StackPanel>

                <!-- Autostart toggle -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                    <TextBlock x:Name="AutoStartLabel"
                              Text="{Binding [AutoStart_Disabled], Source={x:Static loc:LocalizationManager.Instance}}" 
                              VerticalAlignment="Center" 
                              Margin="0,0,8,0"
                              FontWeight="Medium"/>
                    <ToggleButton x:Name="AutoStartToggle" 
                                 Style="{StaticResource ModernToggleSwitch}" 
                                 Click="AutoStartToggle_Click"
                                 ToolTip="{Binding [AutoStart_Tooltip], Source={x:Static loc:LocalizationManager.Instance}}"/>
                </StackPanel>

                <!-- Status -->
                <Border Grid.Column="2" Background="LightBlue" BorderBrush="Blue" BorderThickness="1" Padding="10,5" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <TextBlock x:Name="StatusLabel" Text="{Binding [Status_Stopped], Source={x:Static loc:LocalizationManager.Instance}}" FontWeight="Bold"/>
                </Border>
            </Grid>
        </Border>

        <!-- Central area - log -->
        <Border BorderBrush="Gray" BorderThickness="1" Padding="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header and clear button -->
                <Grid Grid.Row="0" Margin="0,0,0,5">
                    <TextBlock Text="{Binding [Log_Title], Source={x:Static loc:LocalizationManager.Instance}}" FontWeight="Bold" FontSize="14" VerticalAlignment="Center"/>
                    <Button x:Name="ClearLogButton" Content="{Binding [Log_Clear], Source={x:Static loc:LocalizationManager.Instance}}" 
                            Style="{StaticResource SimpleButton}" HorizontalAlignment="Right" Click="ClearLogButton_Click"/>
                </Grid>

                <!-- Log area -->
                <Border Grid.Row="1" Background="Black" BorderBrush="Gray" BorderThickness="1">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                        <TextBox x:Name="LogTextBox"
                                 IsReadOnly="True"
                                 Background="Black"
                                 Foreground="LimeGreen"
                                 BorderThickness="0"
                                 FontFamily="Consolas"
                                 FontSize="11"
                                 Padding="8"
                                 TextWrapping="NoWrap"
                                 AcceptsReturn="True"/>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Border>
    </DockPanel>
</Window>